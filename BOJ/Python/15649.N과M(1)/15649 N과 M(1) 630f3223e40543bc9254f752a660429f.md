# 15649.N과 M(1)

## 문제

자연수 N과 M이 주어졌을 때, 아래 조건을 만족하는 길이가 M인 수열을 모두 구하는 프로그램을 작성하시오.

- 1부터 N까지 자연수 중에서 중복 없이 M개를 고른 수열

## 입력

첫째 줄에 자연수 N과 M이 주어진다. (1 ≤ M ≤ N ≤ 8)

## 출력

한 줄에 하나씩 문제의 조건을 만족하는 수열을 출력한다. 중복되는 수열을 여러 번 출력하면 안되며, 각 수열은 공백으로 구분해서 출력해야 한다.

수열은 사전 순으로 증가하는 순서로 출력해야 한다.

## 예제 입력 1

```
3 1

```

## 예제 출력 1

```
1
2
3

```

## 예제 입력 2

```
4 2

```

## 예제 출력 2

```
1 2
1 3
1 4
2 1
2 3
2 4
3 1
3 2
3 4
4 1
4 2
4 3

```

## 예제 입력 3

```
4 4

```

## 예제 출력 3

```
1 2 3 4
1 2 4 3
1 3 2 4
1 3 4 2
1 4 2 3
1 4 3 2
2 1 3 4
2 1 4 3
2 3 1 4
2 3 4 1
2 4 1 3
2 4 3 1
3 1 2 4
3 1 4 2
3 2 1 4
3 2 4 1
3 4 1 2
3 4 2 1
4 1 2 3
4 1 3 2
4 2 1 3
4 2 3 1
4 3 1 2
4 3 2 1

```

이 문제는 '백트래킹 알고리즘'을 사용하는 문제이다.

```python
N, M = map(int, input().split())
check = [0] * (N+1)  # 1부터 N까지의 자연수 설정, 사용했다 안했다의 체크용
result = [0] * M    # 출력 결과를 저장하는 리스트

def recursive(index, n, m):
    if index == m:
        for i in range(m):
            print(result[i], end=" ")
        print()
        return

    for i in range(1, n+1):  # 수를 탐방하면서 계속 재귀를 돌림
        if check[i] == 1:   # i가 이미 사용된 수라면
            continue        # for문의 i를 +1시키고 다시 시작
        check[i] = 1        # check[i]를 1로 바꿔 사용했다는 것을 표시
        result[index] = i   # result의 위치에 i를 대입
        recursive(index+1, n, m)  # index를 1늘리고 재귀 시작
        # 백트래킹은 스택구조라서 위의 index == m 조건이 만족되고 출력되면 사용했던 나머지를 0으로 돌림
        check[i] = 0

recursive(0, N, M)
```

먼저 check 리스트는 해당 인덱스의 수가 사용이 되었는지 안되어있는지 체크하는 리스트이다. check[1]이면 숫자 1이 사용이 되었다는 것이므로 재귀로 반복을 돌렸을 때 해당 수가 사용되었는지 확인하여 check가 1이면 continue 명령어를 통해 for 반복문으로 돌아가 다음 단계를 진행하는 용도로 사용된다.

result 리스트는 출력할 수가 저장되는 리스트이다. 처음에 이 리스트를 재귀마다 초기화해주어야한다고 생각했는데 조건에 index == m이라는 조건이 설정한 M의 수 만큼 저장되었을 때 result를 출력하는 것이라 초기화할 필요가 없다는걸 깨달았다.

recursive 함수가 처음 실행될 때 check와 result에는 0만 저장이 되어 있는 상태이다. index = 0이고 m은 M이기 때문에 처음 조건은 넘어가고 다음 for문을 통해 수를 계속 탐방하면서 재귀를 실행시킨다. check에는 모든 수가 0이므로 넘어가고, 1부터 조사하기 시작한다. 1을 처음에 사용했으므로 check[1]에 사용했다는 표시인 1로 바꾸고, result[index=0]에 1을 대임한다. 그 다음 index = 1을 대입한 recursive 함수를 실행시킨다. index = 1, m = M이므로 다시 for 반복문으로 들어가 check[1]을 조사해 1이므로(이미 사용된 수이므로) for문의 다음 단계로 진행시킨다. 이런 순서로 진행하고 증가되는 index값이 M이 되면, 그때 이제 result에 저장된 값이 출력되고, return 명령어를 통해 해당 재귀가 하나씩 종료되고 check[i]를 0으로 만들어 사용하기 전으로 되돌린다.